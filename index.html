<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Love Like DataBase</title>
    <meta name="theme-color" content="#ef4444">

    <!-- ã‚¢ã‚¤ã‚³ãƒ³è¨­å®š -->
    <link id="app-icon" rel="icon" type="image/png" href="./icon.png">
    <link id="apple-touch-icon" rel="apple-touch-icon" href="./icon.png">

    <!-- å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (å…±é€š) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* ==========================================================================
           ã€0. GLOBALã€‘ ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« (å…¨ä½“å…±é€š)
           ========================================================================== */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #F8F8F8;
            color: #374151;
            overflow: hidden;
            touch-action: pan-y pinch-zoom;
            -webkit-tap-highlight-color: transparent;
        }
        /* ã‚¢ãƒ—ãƒªç”»é¢ã‚³ãƒ³ãƒ†ãƒŠå®šç¾© */
        .app-screen {
            position: fixed; top: 60px; left: 0; width: 100%; height: calc(100% - 60px);
            display: none; flex-direction: column;
            overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch;
            background-color: #F8F8F8; animation: fadeIn 0.3s ease-out;
        }
        .app-screen.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        /* ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .safe-pb { padding-bottom: env(safe-area-inset-bottom); }
    </style>

    <script>
        // ==========================================================================
        // ã€0. GLOBALã€‘ å…±é€šå®šæ•°è¨­å®š
        // ==========================================================================
        const GAS_API_URL = "https://script.google.com/macros/s/AKfycbzy7CNn83anQMEsvNxyK3zHMtTRtjHk6XZ-jWBNllRNxcXv41hKw-TenGoGjfpps6rLUw/exec";
        const ICON_URL = "https://unavatar.io/twitter/noki_dochibi";
        const APP_VERSION = "v5.1.0";
    </script>
</head>
<body class="bg-gray-100">

    <!-- ==========================================================================
         ã€1. COMMON UIã€‘ ãƒ˜ãƒƒãƒ€ãƒ¼ & æš–ç°¾ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (HTML/CSS/JS)
         ========================================================================== -->
    <style>
        /* æš–ç°¾ãƒ¡ãƒ‹ãƒ¥ãƒ¼ & ãƒ˜ãƒƒãƒ€ãƒ¼ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #noren-menu {
            position: fixed; top: 60px; left: 0; width: 100%;
            background-color: rgba(255, 255, 255, 0.98); backdrop-filter: blur(10px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); z-index: 50;
            transform: translateY(-120%); 
            transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1); /* ã‚¹ãƒ«ãƒƒã¨é™ã‚Šã¦ãã‚‹æ„Ÿ */
            border-bottom-left-radius: 20px; border-bottom-right-radius: 20px; border-bottom: 1px solid #f3f4f6;
            display: block; visibility: hidden; /* display:noneã ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã—ãªã„ãŸã‚visibilityåˆ¶å¾¡ */
        }
        #noren-menu.open { transform: translateY(0); visibility: visible; }
        
        .noren-item { display: flex; align-items: center; gap: 12px; padding: 16px 20px; border-bottom: 1px solid #f3f4f6; cursor: pointer; transition: background-color 0.2s; }
        .noren-item:active { background-color: #f9fafb; }
        .noren-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
        #noren-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); z-index: 40; display: none; opacity: 0; transition: opacity 0.3s; }
        #noren-overlay.open { display: block; opacity: 1; }

        #main-app-header {
            height: 60px; width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0 16px;
            position: fixed; top: 0; z-index: 60; /* æš–ç°¾ã‚ˆã‚Šä¸Šã« */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
        }

        /* ğŸŒ¸ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .flower-icon {
            font-size: 24px;
            display: inline-block;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); /* å¼¾ã‚€ã‚ˆã†ãªå›è»¢ */
        }
        .flower-icon.rotate {
            transform: rotate(180deg) scale(1.1);
        }

        /* About Modal */
        #about-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 100; display: none; align-items: center; justify-content: center; backdrop-filter: blur(4px); opacity: 0; transition: opacity 0.3s; }
        #about-modal.open { display: flex; opacity: 1; }
        .modal-card { bg-white; width: 90%; max-width: 400px; background: white; border-radius: 20px; padding: 24px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); transform: scale(0.95); transition: transform 0.3s; }
        #about-modal.open .modal-card { transform: scale(1); }

    </style>

    <!-- æš–ç°¾ãƒ¡ãƒ‹ãƒ¥ãƒ¼HTML -->
    <div id="noren-overlay" onclick="toggleNoren()"></div>
    <div id="noren-menu">
        <div class="flex flex-col">
            <div class="noren-item" onclick="switchApp('live')">
                <div class="noren-icon bg-red-500"><i data-lucide="mic-2" class="w-6 h-6"></i></div>
                <div class="flex-1"><div class="font-bold text-gray-800">LLDB live</div><div class="text-xs text-gray-400"> ãƒ©ã‚¤ãƒ– / ã‚»ãƒˆãƒª / ãƒ„ã‚¢ãƒ¼ </div></div>
                <i data-lucide="chevron-right" class="text-gray-300 w-5 h-5"></i>
            </div>
            <div class="noren-item" onclick="switchApp('phrase')">
                <div class="noren-icon bg-orange-500"><i data-lucide="music" class="w-6 h-6"></i></div>
                <div class="flex-1"><div class="font-bold text-gray-800">LLDB phrase</div><div class="text-xs text-gray-400"> æ¥½æ›² / æ­Œè©ãƒ•ãƒ¬ãƒ¼ã‚ºæ¤œç´¢ </div></div>
                <i data-lucide="chevron-right" class="text-gray-300 w-5 h-5"></i>
            </div>
            <div class="noren-item" onclick="switchApp('history')">
                <div class="noren-icon bg-pink-500"><i data-lucide="heart-handshake" class="w-6 h-6"></i></div>
                <div class="flex-1"><div class="font-bold text-gray-800">LLDB history</div><div class="text-xs text-gray-400"> aikoã¨ã‚ãŸã— / äººç”Ÿå¹´è¡¨ </div></div>
                <i data-lucide="chevron-right" class="text-gray-300 w-5 h-5"></i>
            </div>
            <div class="noren-item" onclick="switchApp('stats')">
                <div class="noren-icon bg-slate-700"><i data-lucide="bar-chart-2" class="w-6 h-6"></i></div>
                <div class="flex-1"><div class="font-bold text-gray-800">LLDB stats</div><div class="text-xs text-gray-400"> äººæ°—ã®aiko / çµ±è¨ˆ </div></div>
                <i data-lucide="chevron-right" class="text-gray-300 w-5 h-5"></i>
            </div>
            
            <!-- About Menu -->
            <div class="noren-item bg-gray-50/50" onclick="openAboutModal()">
                <div class="noren-icon bg-gray-400"><i data-lucide="info" class="w-6 h-6"></i></div>
                <div class="flex-1"><div class="font-bold text-gray-600">About</div><div class="text-xs text-gray-400"> ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦ </div></div>
                <i data-lucide="chevron-right" class="text-gray-300 w-5 h-5"></i>
            </div>
        </div>
        
        <div class="py-3 flex justify-center cursor-pointer hover:bg-gray-50 active:bg-gray-100 transition rounded-b-[20px]" onclick="toggleNoren()">
            <div class="w-12 h-1.5 bg-gray-300 rounded-full"></div>
        </div>
    </div>

    <!-- å…±é€šãƒ˜ãƒƒãƒ€ãƒ¼HTML -->
    <header id="main-app-header" class="bg-red-500 text-white transition-colors duration-300">
        <h1 class="font-bold text-lg tracking-wide flex-1" id="header-title">LLDB live</h1>
        
        <!-- ğŸŒ¸ Menu Button -->
        <button id="header-menu-btn" onclick="toggleNoren()" class="p-2 rounded-full hover:bg-white/20 transition active:scale-90 flex items-center justify-center w-10 h-10">
            <span class="flower-icon select-none">ğŸŒ¸</span>
        </button>
    </header>

    <!-- About Modal -->
    <div id="about-modal" onclick="closeAboutModal()">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div class="text-center mb-4">
                <span class="text-4xl">ğŸŒ¸</span>
                <h2 class="font-bold text-xl mt-2 text-gray-800">Love Like DataBase</h2>
                <p class="text-xs text-gray-400 font-mono mt-1">Ver 5.1.0</p>
            </div>
            
            <div class="space-y-4 text-sm text-gray-600 leading-relaxed overflow-y-auto max-h-[50vh]">
                <p>
                    ã“ã®ã‚¢ãƒ—ãƒªã¯ã€aikoã‚¸ãƒ£ãƒ³ã‚­ãƒ¼ã§ã‚ã‚‹å€‹äººé–‹ç™ºè€…ãŒ<span class="font-bold text-pink-500">ã€Œå¥½ãã€</span>ã¨<span class="font-bold text-pink-500">ã€Œæƒ…ç†±ã€</span>ã ã‘ã§ä½œã‚Šä¸Šã’ãŸã€å®Œå…¨éå…¬å¼ã®ãƒ•ã‚¡ãƒ³ã‚¢ãƒ—ãƒªã§ã™ã€‚
                </p>
                <div class="bg-red-50 p-3 rounded-lg border border-red-100 text-red-600 text-xs">
                    <p class="font-bold mb-1">âš ï¸ ã”æ³¨æ„</p>
                    å…¬å¼ï¼ˆaiko officialã€ãƒãƒ‹ãƒ¼ã‚­ãƒ£ãƒ‹ã‚ªãƒ³ç­‰ï¼‰ã¨ã¯ä¸€åˆ‡é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒ¼ã‚¿ã®èª¤ã‚Šã‚’å«ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
                </div>
                <p>
                    ãƒ©ã‚¤ãƒ–ã®ã‚»ãƒˆãƒªã€æ­Œè©ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã€ãƒªãƒªãƒ¼ã‚¹æƒ…å ±...<br>
                    æ„›ã—ã„æ™‚é–“ã‚’ã„ã¤ã§ã‚‚æ‰‹å…ƒã«ç½®ã„ã¦ãŠã‘ã‚‹ã‚ˆã†ã«ä½œã‚Šã¾ã—ãŸã€‚
                </p>
                <p>
                    ä¸å…·åˆå ±å‘Šã‚„ã€ã€Œã“ã“é–“é•ã£ã¦ã‚‹ã‚ˆï¼ã€ã¨ã„ã†ã”æŒ‡æ‘˜ã¯ã€X (æ—§Twitter) ã¾ã§ãŠå¯„ã›ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚
                </p>
            </div>

            <div class="mt-6 flex justify-center">
                <a href="https://twitter.com/noki_dochibi" target="_blank" class="flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-full text-xs font-bold hover:bg-gray-700 transition">
                    <i data-lucide="twitter" class="w-4 h-4"></i> é–‹ç™ºè€… @noki_dochibi
                </a>
            </div>
            
            <div class="mt-4 pt-4 border-t border-gray-100 text-center">
                 <button onclick="closeAboutModal()" class="text-gray-400 text-sm font-bold hover:text-gray-600 px-4 py-2">é–‰ã˜ã‚‹</button>
            </div>
        </div>
    </div>


    <!-- ==========================================================================
         ã€2. APP: LLDB liveã€‘ ãƒ©ã‚¤ãƒ–ã‚¢ãƒ—ãƒª (Iframe Container)
         ========================================================================== -->
    <div id="app-live" class="app-screen active">
        <iframe src="./index_LLDBlive.html" class="w-full h-full border-none"></iframe>
    </div>

    <!-- ==========================================================================
         ã€3. APP: LLDB phraseã€‘ æ­Œè©ã‚¢ãƒ—ãƒª (Iframe Container)
         ========================================================================== -->
    <div id="app-phrase" class="app-screen">
        <iframe src="./index_LLDBphrase.html" class="w-full h-full border-none"></iframe>
    </div>

    <!-- ==========================================================================
         ã€4. APP: Othersã€‘ ãã®ä»–ã‚¢ãƒ—ãƒª (Placeholder)
         ========================================================================== -->
    <div id="app-history" class="app-screen items-center justify-center p-6">
        <div class="bg-pink-50 p-6 rounded-2xl shadow-sm max-w-xs border border-pink-100 text-center"><div class="text-4xl mb-4">ğŸ¤</div><h2 class="font-bold text-pink-500 text-lg mb-2">LLDB history</h2><p class="text-sm text-gray-500 leading-relaxed"> ã‚ãªãŸã¨aikoã®å¹´è¡¨ã‚’ä½œã‚Œã‚‹æ©Ÿèƒ½ã‚’ <br>æº–å‚™ä¸­ã§ã™ğŸŒ·</p></div>
    </div>
   
    <div id="app-stats" class="app-screen items-center justify-center p-6">
        <div class="bg-white p-6 rounded-2xl shadow-sm max-w-xs text-center"><div class="text-4xl mb-4">ğŸ“ˆ</div><h2 class="font-bold text-slate-700 text-lg mb-2">LLDB stats</h2><p class="text-sm text-gray-500 leading-relaxed"> Youtubeå†ç”Ÿæ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãªã©ã‚’ <br> é›†è¨ˆä¸­ã§ã™ï¼ </p></div>
    </div>


    <!-- ==========================================================================
         ã€5. ROUTINGã€‘ å…±é€šãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åˆ¶å¾¡
         ========================================================================== -->
    <script>
        // ã‚¢ãƒ—ãƒªå®šç¾©
        const apps = {
            'live': { title: 'LLDB live', color: 'bg-red-500' },
            'phrase': { title: 'LLDB phrase', color: 'bg-orange-500' },
            'history': { title: 'LLDB history', color: 'bg-pink-500' },
            'stats': { title: 'LLDB stats', color: 'bg-slate-700' }
        };

        // ã‚¢ãƒ—ãƒªåˆ‡ã‚Šæ›¿ãˆ
        function switchApp(appName) {
            document.querySelectorAll('.app-screen').forEach(el => el.classList.remove('active'));
            const target = document.getElementById('app-' + appName);
            if(target) target.classList.add('active');

            // ãƒ˜ãƒƒãƒ€ãƒ¼æ›´æ–°
            const header = document.getElementById('main-app-header');
            const title = document.getElementById('header-title');
            if(apps[appName]) {
                header.className = `${apps[appName].color} text-white transition-colors duration-300 flex items-center justify-between px-4 fixed top-0 z-30 shadow-sm w-full h-[60px]`;
                title.textContent = apps[appName].title;
            }

            // æš–ç°¾ã‚’é–‰ã˜ã‚‹
            const menu = document.getElementById('noren-menu');
            if(menu.classList.contains('open')) toggleNoren();
            
            lucide.createIcons();
        }

        // å…±é€šUIåˆ¶å¾¡ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
        function toggleNoren() {
            const menu = document.getElementById('noren-menu');
            const overlay = document.getElementById('noren-overlay');
            const flower = document.querySelector('.flower-icon');

            if(menu.classList.contains('open')) {
                // Close
                menu.classList.remove('open'); 
                overlay.classList.remove('open');
                flower.classList.remove('rotate'); // å›è»¢ãƒªã‚»ãƒƒãƒˆ
                setTimeout(() => { 
                    menu.style.visibility='hidden'; 
                    overlay.style.display='none'; 
                }, 400); // transitionæ™‚é–“ã¨åˆã‚ã›ã‚‹
            } else {
                // Open
                menu.style.visibility='visible'; 
                overlay.style.display='block';
                // å°‘ã—å¾…ã£ã¦ã‹ã‚‰ã‚¯ãƒ©ã‚¹ä»˜ä¸ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç™ºç«
                setTimeout(() => { 
                    menu.classList.add('open'); 
                    overlay.classList.add('open');
                    flower.classList.add('rotate'); // å›è»¢ï¼
                }, 10);
            }
        }

        function openAboutModal() {
            // æš–ç°¾ã‚’é–‰ã˜ã¦ã‹ã‚‰ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
            toggleNoren();
            setTimeout(() => {
                const modal = document.getElementById('about-modal');
                modal.classList.add('open');
            }, 300);
        }

        function closeAboutModal() {
            const modal = document.getElementById('about-modal');
            modal.classList.remove('open');
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ãƒ—ãƒª: LLDB live
            switchApp('live');
        });
    </script>

</body>
</html>
